{% load crispy_forms_tags %}
{% load custom_tags %}
<div class="row">
	<div class="col-12">
		<h5>Uploads</h5>
	</div>
</div>
</hr>
<div class="upload-card" style="margin-top: 20px">
	<div class="row" style="margin-left: 20px;">
		<div class="col-12">
			<div class="" style="margin-bottom: 15px; font-weight: bold">Whole Proposal/Research Paper</div>

			<div style="margin-bottom: 10px;"><span id="abstract-filename"></span></div>
			<span id="abstract-file">{{ record_form.abstract_file|as_crispy_field }}</span>
		</div>
	</div>
</div>
<div class="row" style="margin-top: 30px">
	<div class="col-12">
		<h5>Optional Uploads</h5>
	</div>
</div>
<hr>
<section style="margin-top: 20px">
{% for upload in uploads %}
	{% if record.record_type.pk ==  upload.record_type.pk %}
		<div class="upload-card" style="margin-bottom: 15px;">
			<div class="row" style="margin-left: 20px; margin-bottom: 20px;">
				<div class="col-12">
						<div class="row" style="align-items: center !important;">
							<div class="col-12">
								<label style="margin-bottom: 5px" >{{ upload.name }}</label>
								{% for recordupload in recorduploads %}
									{% if recordupload.upload.pk == upload.pk and recorduploads|has_match:upload.pk %}
										<div style="float: right; margin-right: 40px; padding: 5px; margin-top: 10px" class="badge badge-success">Uploaded </div>
									{% endif %}
								{% endfor %}
									{% if not recorduploads|has_match:upload.pk %}
									<div style="float: right; margin-right: 35px; padding: 5px; margin-top: 10px" class="badge badge-secondary">No Upload</div>
									{% endif %}
							</div>
						</div>
					{% for recordupload in recorduploads %}
							{% if recordupload.upload.pk == upload.pk and recorduploads|has_match:upload.pk %}
								  <div style="margin-bottom: 10px;">Current File: {{ recordupload.filename }}</div>
							{% endif %}
						{% endfor %}
					<input type="file" name="upload-{{ upload.pk }}">

				</div>
			</div>
		</div>
	{% endif %}
{% endfor %}
</section>

<div class="row" style="margin-top:10px;">
	<div class="col-12 d-flex justify-content-end">
		<button class="btn prevButtonListener base-btn base-bg-primary" type="button">Prev</button>
		<button data-toggle="modal" data-target="#record-submit-modal" type="button" class="btn base-btn base-bg-primary" id="btn-confirm" style="margin-left:10px;">Confirm</button>
	</div>
</div>
